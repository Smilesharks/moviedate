(function(){var t;t={init:function(){return this.tmdb={api_key:"be7463424e04e25654a938f9a9951509",query_params:"language=es-US&page=1&region=US&append_to_response=videos",base_uri:"https://api.themoviedb.org/3/",images_uri:"http://image.tmdb.org/t/p",timeout:5e3,image_size:"/w500"},this.set_handlers(),this.load_upcoming()},set_handlers:function(){var a,e,i,o,n;return $("body").on("click",".movie-card",(a=this,function(t){return a.load_movie_info($(t.currentTarget).attr("data-movie-id"))})),$("body").on("click","#modal-container",function(t){return $(t.currentTarget).addClass("out"),$("body").removeClass("modal-active")}),$("body").on("click",'[data-action="nowplaying"]',(e=this,function(t){return e.load_nowplaying()})),$("body").on("click",'[data-action="upcoming"]',(i=this,function(t){return i.load_upcoming()})),$("#search").click((o=this,function(t){return o.search()})),$("#query").keydown((n=this,function(t){if(13===t.keyCode)return n.search()}))},api_call:function(t,a,e,i){var o;return(o={}).api_key=this.tmdb.api_key,o.language="en-US",o.region="US",o.append_to_response="videos",""!==e&&(o.query=e),$.getJSON(""+t+a,o,function(t){return i(t)})},load_upcoming:function(){return this.api_call(this.tmdb.base_uri,"movie/upcoming","",(e=this,function(t){var a;return 0<(null!=(a=t.results)?a.length:void 0)?e.load_movies(t.results,!0):alert("No results")}));var e},load_nowplaying:function(){return this.api_call(this.tmdb.base_uri,"movie/now_playing","",(e=this,function(t){var a;return 0<(null!=(a=t.results)?a.length:void 0)?e.load_movies(t.results,!1):alert("No results")}));var e},search:function(){return this.api_call(this.tmdb.base_uri,"search/movie",$("#query").val(),(a=this,function(t){return a.load_movies(t.results,!1)}));var a},load_movies:function(t,a){var e,i,o,n,r,s,d,l,p;for($("#info").empty(),p=[],e=0,i=t.length;e<i;e++)l=null!=(o=t[e]).poster_path?""+this.tmdb.images_uri+this.tmdb.image_size+o.poster_path:"http://colouringbook.org/SVG/2011/COLOURINGBOOK.ORG/cartoon_tv_black_white_line_art_scalable_vector_graphics_svg_inkscape_adobe_illustrator_clip_art_clipart_coloring_book_colouring-1331px.png","http://www.google.com/calendar/event?action=TEMPLATE&dates=#{release_date}%2FT010000Z&text=#{title}&location=&details=",n=$("<div/>").addClass("col-xl-3 col-sm-12 col-xs-12 movie-item"),r=$("<div/>").addClass("button poster card text-white d-flex movie-card").attr("data-movie-id",o.id),!0===a&&r.append($("<span/>").addClass("w-100 status").append($("<div/>").attr("data-countdown",o.release_date).addClass("m-2 primary"))),r.append($("<div/>").addClass("poster__grad")),r.append($("<div/>").addClass("poster__img").attr("style","filter: grayscale(1);background-image:url("+l+")")),(d=$("<div/>").addClass("poster__info align-self-end w-100 p-2")).append($("<h3/>").addClass("h4 poster__title card-title").text(o.title)),d.append($("<p/>").addClass("poster__text m-0").text(o.release_date)),r.append(d),(s=$("<div/>").addClass("poster__footer poster__footer row mt-2 mb-4")).append($("<div/>").addClass("col-3").append($("<div/>").addClass("button btn btn-secondary").append($("<i/>").addClass("fas fa-ticket-alt")))),s.append($("<div/>").addClass("col-9").append($("<a/>").addClass("trailer button btn btn-primary w-100").text("Trailer"))),n.append(r),n.append(s),$("#info").append(n),p.push(this.load_countdown());return p},load_movie_info:function(t){var a,n;return $("#display").empty(),(a={}).api_key=this.tmdb.api_key,a.language="es-US",a.region="US",a.append_to_response="videos",this.api_call(this.tmdb.base_uri,"movie/"+t,a,(n=this,function(t){var a,e,i,o;return o=0<t.videos.results.length&&"YouTube"===t.videos.results[0].site?"https://www.youtube.com/embed/"+t.videos.results[0].key:"",null!=t.poster_path?(i=""+n.tmdb.images_uri+n.tmdb.image_size+t.poster_path,$(".trailer").addClass("bingo").attr("data-lity","#{video_link}")):i="http://colouringbook.org/SVG/2011/COLOURINGBOOK.ORG/cartoon_tv_black_white_line_art_scalable_vector_graphics_svg_inkscape_adobe_illustrator_clip_art_clipart_coloring_book_colouring-1331px.png",a=$("<div/>").append($("<img/>").addClass("mr-3").attr("src",i)),$("#display").append(a.addClass("mr-3")),e=$("<div/>").addClass("media-body"),$(".trailer").addClass("bingo").attr("data-lity","").attr("href",o),e.append($("<h2/>").addClass("mt-5").text(""+t.title)),e.append($("<h4/>").addClass("bingo").text("Release date: "+t.release_date)),e.append($("<h5/>").attr("data-countdown",t.release_date)),e.append($("<p/>").addClass("bingo").text("Description: "+t.overview)),$("#display").append(e),$("#modal-container").removeAttr("class").addClass("one"),$("body").addClass("modal-active"),poster_footer.append($("<a/>").attr("src",o))}))},load_countdown:function(){var a,t,e,i,o,n;for(n=[],e=0,i=(o=$("[data-countdown]")).length;e<i;e++)a=o[e],t=$(a).attr("data-countdown"),n.push($(a).countdown(t,function(t){return $(a).html(t.strftime("%D Days %H:%M:%S"))}));return n}},$(function(){return t.init()})}).call(this);