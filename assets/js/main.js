(function(){var e;e={init:function(){return this.tmdb={api_key:"be7463424e04e25654a938f9a9951509",query_params:"language=es-US&page=1&region=US&append_to_response=videos",base_uri:"https://api.themoviedb.org/3/",images_uri:"http://image.tmdb.org/t/p",timeout:5e3,image_size:"/w342",backdrop_size:"/w780",no_api:"http://lorempixel.com/output/animals-q-c-640-480-10.jpg"},this.set_handlers(),this.load_upcoming()},set_handlers:function(){var t,a,i,d,s;return $("body").on("touch click",".movie-card",(t=this,function(e){return t.load_movie_info($(e.currentTarget).attr("data-movie-id"))})),$("body").on("touch click","#modal-container",function(e){return $(e.currentTarget).addClass("out"),$("body").removeClass("modal-active")}),$("body").on("touch click",'[data-action="nowplaying"]',(a=this,function(e){return a.load_nowplaying()})),$("body").on("touch click",'[data-action="upcoming"]',(i=this,function(e){return i.load_upcoming()})),$("#search").click((d=this,function(e){return d.search()})),$("#query").keydown((s=this,function(e){if(13===e.keyCode)return s.search()}))},api_call:function(e,t,a,i){var d;return(d={}).api_key=this.tmdb.api_key,d.language="en-US",d.region="US",d.append_to_response="videos",""!==a&&(d.query=a),$.getJSON(""+e+t,d,function(e){return i(e)})},load_upcoming:function(){return this.api_call(this.tmdb.base_uri,"movie/upcoming","",(a=this,function(e){var t;return 0<(null!=(t=e.results)?t.length:void 0)?a.load_movies(e.results,!0):alert("No results")}));var a},load_nowplaying:function(){return this.api_call(this.tmdb.base_uri,"movie/now_playing","",(a=this,function(e){var t;return 0<(null!=(t=e.results)?t.length:void 0)?a.load_movies(e.results,!1):alert("No results")}));var a},search:function(){return this.api_call(this.tmdb.base_uri,"search/movie",$("#query").val(),(t=this,function(e){return t.load_movies_search(e.results,!1)}));var t},load_movies:function(e,p){var t,a,i,u,d;for($("#info").empty(),d=[],a=0,i=e.length;a<i;a++)u=e[a],(t={}).api_key=this.tmdb.api_key,t.language="es-US",t.region="US",t.append_to_response="videos",d.push(this.api_call(this.tmdb.base_uri,"movie/"+u.id,t,function(l){return function(e){var t,a,i,d,s,o,r,n;return n=0<e.videos.results.length&&"YouTube"===e.videos.results[0].site?"https://www.youtube.com/embed/"+e.videos.results[0].key:"",o=null!=u.poster_path?""+l.tmdb.images_uri+l.tmdb.image_size+e.poster_path:"http://lorempixel.com/output/animals-q-c-640-480-10.jpg",a=$("<div/>").addClass("col-sm-12 col-xs-12 col-md-6 col-xl-3 movie-item"),i=$("<div/>").addClass("button poster card text-white d-flex movie-card").attr("data-movie-id",e.id).attr("data-lity","").attr("href","#lity-modal"),!0===p&&i.append($("<span/>").addClass("w-100 status").append($("<div/>").attr("data-countdown",e.release_date).addClass("m-2 primary"))),i.append($("<div/>").addClass("poster__grad")),i.append($("<div/>").addClass("poster__img").attr("style","filter: grayscale(1);background-image:url("+o+")")),(s=$("<div/>").addClass("poster__info align-self-end w-100 p-2")).append($("<h3/>").addClass("h4 poster__title card-title").text(e.title)),s.append($("<p/>").addClass("poster__text m-0").text(e.release_date)),i.append(s),d=$("<div/>").addClass("poster__footer poster__footer row mt-2 mb-4"),r="http://www.google.com/calendar/event?action=TEMPLATE&dates="+(t=e.release_date.replace(/\-/g,""))+"T010000Z%2F"+t+"T010000Z&text="+e.title+"%20%2D%20Movie%20Premiere&location=http%3A%2F%2Fmoviedates.info&details=This%20reminder%20was%20created%20through%20http%3A%2F%2Fmoviedates.info",d.append($("<div/>").addClass("col-3").append($("<a/>").addClass("button btn btn-secondary").attr("href",r).attr("target","_blank").append($("<i/>").addClass("far fa-calendar-plus")))),d.append($("<div/>").addClass("col-9").append($("<a/>").addClass("trailer button btn btn-primary w-100").attr("data-lity","").attr("href",n).text("Trailer"))),a.append(i),a.append(d),$("#info").append(a),l.load_countdown()}}(this)));return d},load_movies_search:function(e,l){var t,a,i,p,d;for($("#info").empty(),d=[],a=0,i=e.length;a<i;a++)p=e[a],(t={}).api_key=this.tmdb.api_key,t.language="es-US",t.region="US",t.append_to_response="videos",d.push(this.api_call(this.tmdb.base_uri,"movie/"+p.id,t,function(n){return function(e){var t,a,i,d,s,o,r;return r=0<e.videos.results.length&&"YouTube"===e.videos.results[0].site?"https://www.youtube.com/embed/"+e.videos.results[0].key:"",o=null!=p.poster_path?""+n.tmdb.images_uri+n.tmdb.image_size+e.poster_path:"http://lorempixel.com/output/animals-q-c-640-480-10.jpg",a=$("<div/>").addClass("col-sm-12 col-xs-12 col-md-6 col-xl-3 movie-item"),i=$("<div/>").addClass("button poster card text-white d-flex movie-card").attr("data-movie-id",e.id),!0===l&&i.append($("<span/>").addClass("w-100 status").append($("<div/>").attr("data-countdown",e.release_date).addClass("m-2 primary"))),i.append($("<div/>").addClass("poster__grad")),i.append($("<div/>").addClass("poster__img").attr("style","filter: grayscale(1);background-image:url("+o+")")),(s=$("<div/>").addClass("poster__info align-self-end w-100 p-2")).append($("<h3/>").addClass("h4 poster__title card-title").text(e.title)),s.append($("<p/>").addClass("poster__text m-0").text("User Score: "+e.vote_average)),i.append(s),d=$("<div/>").addClass("poster__footer poster__footer row mt-2 mb-4"),"http://www.google.com/calendar/event?action=TEMPLATE&dates="+(t=e.release_date.replace(/\-/g,""))+"T010000Z%2F"+t+"T010000Z&text="+e.title+"%20%2D%20Movie%20Premiere&location=http%3A%2F%2Fmoviedates.info&details=This%20reminder%20was%20created%20through%20http%3A%2F%2Fmoviedates.info",d.append($("<div/>").addClass("col-12").append($("<a/>").addClass("trailer button btn btn-primary w-100").attr("data-lity","").attr("href",r).text("Trailer"))),a.append(i),a.append(d),$("#info").append(a),n.load_countdown()}}(this)));return d},load_movie_info:function(e){var t;return $("#display").empty(),$("#cover").empty(),(t={}).api_key=this.tmdb.api_key,t.language="es-US",t.region="US",t.append_to_response="videos",this.api_call(this.tmdb.base_uri,"movie/"+e,t,function(e){var t,a;return 0<e.videos.results.length&&"YouTube"===e.videos.results[0].site&&e.videos.results[0].key,null!=e.poster_path&&(t="http://lorempixel.com/output/animals-q-c-640-480-10.jpg"),$("<div/>").append($("<img/>").addClass("image").attr("src",t)),(a=$("<div/>").addClass("media-body")).append($("<h2/>").addClass("title pt-3").text(""+e.title)),a.append($("<div/>").addClass("tagline").text(""+e.tagline)),a.append($("<div/>").addClass("info").text("Popularity:")),a.append($("<div/>").addClass("popularity").text(""+e.popularity)),a.append($("<div/>").addClass("info").text("Release date:")),a.append($("<div/>").addClass("release").text(""+e.release_date)),a.append($("<div/>").addClass("info").text("Runtime:")),a.append($("<div/>").addClass("runtime").text(e.runtime+" min")),a.append($("<p/>").addClass("overview").text("Overview: "+e.overview)),$("#cover").attr("style","background-image:url("+t+")"),$("#display").append(a)})},load_countdown:function(){var t,e,a,i,d,s;for(s=[],a=0,i=(d=$("[data-countdown]")).length;a<i;a++)t=d[a],e=$(t).attr("data-countdown"),s.push($(t).countdown(e,function(e){return $(t).html(e.strftime("%D Days %H:%M:%S"))}));return s}},$(function(){return e.init()})}).call(this);