(function(){var t;t={init:function(){return this.tmdb={api_key:"be7463424e04e25654a938f9a9951509",query_params:"language=es-US&page=1&region=US&append_to_response=videos",base_uri:"https://api.themoviedb.org/3/",images_uri:"http://image.tmdb.org/t/p",timeout:5e3,image_size:"/w500"},this.set_handlers(),this.load_upcoming()},set_handlers:function(){var a,e,i,n,r,o,d;return $("body").on("click",".movie-card",(a=this,function(t){return a.load_movie_info($(t.currentTarget).attr("data-movie-id"))})),$("body").on("click",".trailer",(e=this,function(t){return e.load_movie_info($(t.currentTarget).attr("href","#{data.video_link}").attr("data-lity",""))})),$("body").on("click",".trailer",(i=this,function(t){return i.load_movie_info($(t.currentTarget).attr("src","#{data.video_link}"))})),$("body").on("click","#modal-container",function(t){return $(t.currentTarget).addClass("out"),$("body").removeClass("modal-active")}),$("body").on("click",'[data-action="nowplaying"]',(n=this,function(t){return n.load_nowplaying()})),$("body").on("click",'[data-action="upcoming"]',(r=this,function(t){return r.load_upcoming()})),$("#search").click((o=this,function(t){return o.search()})),$("#query").keydown((d=this,function(t){if(13===t.keyCode)return d.search()}))},api_call:function(t,a,e,i){var n;return(n={}).api_key=this.tmdb.api_key,n.language="en-US",n.region="US",n.append_to_response="videos",""!==e&&(n.query=e),$.getJSON(""+t+a,n,function(t){return i(t)})},load_upcoming:function(){return this.api_call(this.tmdb.base_uri,"movie/upcoming","",(e=this,function(t){var a;return 0<(null!=(a=t.results)?a.length:void 0)?e.load_movies(t.results,!0):alert("No results")}));var e},load_nowplaying:function(){return this.api_call(this.tmdb.base_uri,"movie/now_playing","",(e=this,function(t){var a;return 0<(null!=(a=t.results)?a.length:void 0)?e.load_movies(t.results,!1):alert("No results")}));var e},search:function(){return this.api_call(this.tmdb.base_uri,"search/movie",$("#query").val(),(a=this,function(t){return a.load_movies(t.results,!1)}));var a},load_movies:function(t,a){var e,i,n,r,o,d,s,l,p;for($("#info").empty(),p=[],e=0,i=t.length;e<i;e++)l=null!=(n=t[e]).poster_path?""+this.tmdb.images_uri+this.tmdb.image_size+n.poster_path:"http://lorempixel.com/output/animals-q-c-640-480-10.jpg","http://www.google.com/calendar/event?action=TEMPLATE&dates=#{release_date}%#{release_date}&text=#{title}&location=&details=",r=$("<div/>").addClass("col-sm-12 col-xs-12 col-md-6 col-xl-3 movie-item"),o=$("<div/>").addClass("button poster card text-white d-flex movie-card").attr("data-movie-id",n.id),!0===a&&o.append($("<span/>").addClass("w-100 status").append($("<div/>").attr("data-countdown",n.release_date).addClass("m-2 primary"))),o.append($("<div/>").addClass("poster__grad")),o.append($("<div/>").addClass("poster__img").attr("style","filter: grayscale(1);background-image:url("+l+")")),(s=$("<div/>").addClass("poster__info align-self-end w-100 p-2")).append($("<h3/>").addClass("h4 poster__title card-title").text(n.title)),s.append($("<p/>").addClass("poster__text m-0").text(n.release_date)),o.append(s),(d=$("<div/>").addClass("poster__footer poster__footer row mt-2 mb-4")).append($("<div/>").addClass("col-3").append($("<div/>").addClass("button btn btn-secondary").append($("<i/>").addClass("fas fa-ticket-alt")))),d.append($("<div/>").addClass("col-9").append($("<a/>").addClass("trailer button btn btn-primary w-100").text("Trailer"))),r.append(o),r.append(d),$("#info").append(r),p.push(this.load_countdown());return p},load_movie_info:function(t){var a,r;return $("#display").empty(),(a={}).api_key=this.tmdb.api_key,a.language="es-US",a.region="US",a.append_to_response="videos",this.api_call(this.tmdb.base_uri,"movie/"+t,a,(r=this,function(t){var a,e,i,n;return n=0<t.videos.results.length&&"YouTube"===t.videos.results[0].site?"https://www.youtube.com/embed/"+t.videos.results[0].key:"",i=null!=t.poster_path?""+r.tmdb.images_uri+r.tmdb.image_size+t.poster_path:"http://lorempixel.com/output/animals-q-c-640-480-10.jpg",a=$("<div/>").append($("<img/>").addClass("mr-3").attr("src",i)),$("#display").append(a.addClass("mr-3")),(e=$("<div/>").addClass("media-body")).append($("<div/>").addClass("actualyoutube").html("<iframe width='560' height='315' src='"+n+"' frameborder='0' allowfullscreen></iframe>")),$(".trailer").addClass("bingo").attr("data-lity","").attr("href",n),e.append($("<h2/>").addClass("mt-5").text(""+t.title)),e.append($("<h4/>").addClass("bingo").text("Release date: "+t.release_date)),e.append($("<h5/>").attr("data-countdown",t.release_date)),e.append($("<p/>").addClass("bingo").text("Description: "+t.overview)),$("#display").append(e),$("#modal-container").removeAttr("class").addClass("one"),$("body").addClass("modal-active"),poster_footer.append($("<a/>").attr("src",n))}))},load_countdown:function(){var a,t,e,i,n,r;for(r=[],e=0,i=(n=$("[data-countdown]")).length;e<i;e++)a=n[e],t=$(a).attr("data-countdown"),r.push($(a).countdown(t,function(t){return $(a).html(t.strftime("%D Days %H:%M:%S"))}));return r}},$(function(){return t.init()})}).call(this);